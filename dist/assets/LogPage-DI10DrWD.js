import{j as t,e as h,C as u,T as d}from"./index-DCRMDEnN.js";import{r as s}from"./react-dom-B_KBoKIY.js";import{B as g}from"./button-DEnRpW9g.js";import{P as f}from"./Table-DyPCT7V2.js";import{P as S}from"./ProCard-Dqfv741k.js";import"./index-CDqw0lfA.js";import"./index-Ctq1ZWD9.js";import"./index-CmozH8WR.js";import"./FileOutlined-l9Qrf-hC.js";import"./progress-Cp_dByrN.js";import"./index-BvlifVVu.js";import"./index-CoWpGy66.js";import"./index-D8YrEZpJ.js";import"./FolderOutlined-DdSHhABZ.js";function j({name:n}){const[c,l]=s.useState([]),[m,p]=s.useState([]);function o(){const a=h.API_URL+"/api/v1/log/options?name="+n;fetch(a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("SESSION")||""}}).then(e=>e.json()).then(e=>{e.status==0&&l(e.data[0])});const i=h.API_URL+"/api/v1/log/log?name="+n+"&line=100";fetch(i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("SESSION")||""}}).then(e=>e.json()).then(e=>{p(e.data)})}s.useEffect(()=>{o()},[]);const r=async()=>{var i;const a=((i=h)==null?void 0:i.API_URL)+"/api/v1/log/log?name="+n;await fetch(a,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("SESSION")||""}}),o()};return t.jsxs(t.Fragment,{children:[t.jsx(g,{onClick:r,children:"清理日志"}),t.jsx(g,{onClick:o,children:"更新获取"}),t.jsx(f,{columns:c,dataSource:m,toolbar:{style:{height:0}},search:!1})]})}function z(){const n=s.useContext(u),[c,l]=s.useState([]),m=async()=>{const o=(n==null?void 0:n.API_URL)+"/api/v1/log/logs",a=await(await fetch(o,{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("SESSION")||""}})).json();a.status===0&&l(a.data)};s.useEffect(()=>{m()},[]);const p=c.map((o,r)=>({label:o,key:r.toString(),children:t.jsx(j,{name:o})}));return t.jsx(t.Fragment,{children:t.jsx(S,{children:t.jsx(d,{items:p})})})}export{z as default};
